.ncf-toolbox {
	height: calc(100% - 6.75rem);
	align-self: flex-end;
	.toolbox__body {
		padding-top: 0px;
	}
}

.ncf-toolbox-content {
	display: flex;
	flex-direction: column;
	max-width: 20rem;
	min-width: 20rem;
	height: 100%;
	overflow: hidden;
}

.ncf-toolbox__min__button__container {
	display: flex;
	flex-direction: column;
	height: 100%;
	justify-content: space-between;
}
.ncf-toolbox__min__button__section {
	display: flex;
	flex-direction: column;
}

.ncf__export__shortcut {
	margin-top: auto;
}

.ncf-tabs {
	flex: 1;
	.tabbed__container__tabs {
		border-bottom: 1px solid rgba($light, 0.5);
	}
	.tabbed__container__display__position {
		overflow: hidden;
	}
	overflow: hidden;
}

.ncf-buttons__grid.grid-columns {
	--colWidth: 7rem;
	padding: 0.5rem;
	gap: 0.5rem;
	width: 100%;
	max-height: 100%;
	overflow: auto;
	@include scrollbars(1rem, rgba($gray-900, 0.5), transparent);
	justify-items: center;
	& > div {
		width: 8rem;
	}
}

.ncf-basic__header {
	display: flex;
	flex-direction: column;
}
.ncf-basic__header__title {
	font-size: 1.25rem;
	line-height: 1;
	padding-top: 0.5rem;
	padding-bottom: 0.5rem;
}

.ncf-basic__item__detail {
	margin-left: 2rem;
	display: flex;
	width: 100%;
}

.ncf-basic__close.MuiButton-root {
	min-width: auto;
	padding-left: 0.5rem;
	padding-right: 0.5rem;
	border-top: none;
	border-right: none;
	border-top-left-radius: 0px;
	border-top-right-radius: 0px;
	border-bottom-right-radius: 0px;
	flex: 0;
}

.ncf-basic__selection {
	border-color: currentColor;
	border-bottom-right-radius: 0.25rem;
	border-width: 1px;
	border-top-width: 0px;
	border-style: solid;
	padding-left: 0.5rem;
	padding-right: 0.5rem;
	flex: 1;
}

.ncf-advanced {
	color: $light;
	height: 100%;
	display: flex;
	flex-direction: column;
}
.ncf-advanced__accordion__group__wrapper {
	overflow: auto;
	flex: 1;
	margin-bottom: 0.5rem;
	// > .ncf-advanced__accordion__group {
	max-height: 100%;
	> .accordion {
		max-height: 100%;
		&.Mui-expanded {
			margin-top: 0.5rem;
			margin-bottom: 0.5rem;
			border-radius: 0.25rem;
			overflow: hidden;
		}
		&:not(:last-child()) .MuiAccordionSummary-root {
			border-bottom: 1px solid rgba($light, 0.3);
		}
	}
	// }
	.checkgroup__autocomplete__wrapper .grid-columns.checkgroup__columns {
		overflow-x: hidden;
	}
}

.ncf-summary {
	padding: 0rem 0.5rem 0.5rem 0.5rem;
	border-bottom: 1px solid rgba($light, 0.5);
	flex: 0;
}

.ncf-summary__bkg {
	display: grid;
	grid-template-columns: 1fr 1fr;
	justify-items: center;
	background: rgba($gray-900, 0.9);
	border-radius: 0.25rem;
	padding-top: 0.5rem;
	padding-bottom: 0.5rem;
}

.ncf-summary__item__padding {
	padding: 0rem 0.75rem;
	display: flex;
	flex-direction: column;
	justify-content: center;
	.ncf-summary__item {
		padding: 0rem 0.375rem;
		height: 100%;
	}
	&:nth-child(2n) {
		border-left: 1px solid rgba($light, 0.5);
	}
	&:nth-child(n + 3) .ncf-summary__item,
	&:nth-child(n + 4) .ncf-summary__item {
		border-top: 1px solid rgba($light, 0.5);
		padding-top: 0.25rem;
	}
	&:nth-child(n - 2) .ncf-summary__item {
		padding-bottom: 0.25rem;
	}
	// &:nth-child(n + 2) .ncf-summary__item {
	// 	padding-top: 0.25rem;
	// }
	width: 100%;
}

.ncf-summary__item {
	display: flex;
	flex-direction: row;
	flex-wrap: nowrap;
	justify-content: space-between;
	align-items: center;
	position: relative;
	> :not(:first-child()) {
		padding-left: 0.5rem;
	}
	// &::after {
	// 	content: '';
	// 	background-color: rgba($cyan, 0.2);
	// 	position: absolute;
	// 	top: 0px;
	// 	left: 0px;
	// 	height: 100%;
	// 	width: 0%;
	// 	transition: all $transition-duration $transition-timing;
	// }
	// &:hover {
	// 	&::after {
	// 		width: 100%;
	// 	}
	// }
}

.ncf-summary__value__container {
	display: flex;
	flex-wrap: nowrap;
	align-items: flex-start;
}

.ncf-summary__item__value {
	line-height: 1;
	font-size: 1.75rem;
}

.ncf-summary__item__value__total {
	padding-left: 0.5rem;
	padding-top: 0.375rem;
}

.ncf-summary__item__label {
	text-transform: uppercase;
	font-size: 0.9rem;
	white-space: nowrap;
}

.ncf-view-item {
	width: 100%;
	display: flex;
	flex-direction: column;
	align-items: stretch;

	justify-content: space-between;
	height: 100%;
}

.ncf-view-item__label {
	flex-grow: 1;
	display: flex;
	justify-content: center;
	align-items: center;
	flex-direction: column;
}

.ncf-view-item__label {
	flex-grow: 1;
	display: flex;
	justify-content: center;
	align-items: center;
	flex-direction: column;
}

.ncf-view-item__switch__container {
	display: flex;
	align-items: center;
	cursor: pointer;
	justify-content: center;

	.MuiSwitch-root {
		margin-left: -0.5rem;
		margin-right: -0.5rem;
	}
}

.ncf-view__icon__container {
	width: 100%;
	svg {
		width: 100%;
		height: auto;
	}
	transition: transform $transition-duration $transition-timing;
	&.rotate {
		transform: rotate(-90deg);
	}
}

.button__styled.ncf__button {
	width: 100%;
	padding-bottom: 0.75rem;
	height: 100%;
	.MuiButton-label {
		height: 100%;
	}
	.ncf-view-item .ncf-view__icon__container svg {
		transition: transform $transition-duration $transition-timing;
	}

	&:hover {
		.ncf-view-item > .ncf-view__icon__container svg {
			transform: scale(1.1);
		}
	}
	&.ncf-basic__button .ncf-view-item > .ncf-view__icon__container svg {
		width: 80%;
		margin-top: 10%;
	}
}

// .ncf-basic {
// 	height: 100%;
// 	display: flex;
// 	flex-direction: column;
// 	justify-content: space-between;
// }

.ncf-basic.MuiAccordion-root {
	display: flex;
	flex: 1;
	flex-direction: column;
	margin-bottom: 0px;
	transition: border-bottom-right-radius $transition-duration $transition-timing;
	background-color: rgba($gray-900, 0.5);

	&.MuiPaper-root {
		color: unset;
	}
	.MuiAccordionSummary-root {
		min-height: fit-content;
		padding: 0px;
		.MuiAccordionSummary-content {
			margin: 0px;
		}
	}
	&.Mui-expanded {
		margin-bottom: 0px;
	}
	&.has__selection {
		.ncf-basic__button .MuiButton-root,
		.ncf-basic__button .MuiButton-root {
			border-bottom-right-radius: 0px;
		}
	}

	.MuiAccordionDetails-root {
		min-width: 100%;

		color: $white;
		padding: 1rem;
	}

	> .MuiAccordionDetails-root {
		background-color: unset;
		&::-webkit-scrollbar-track {
			border-right: 1px solid transparent;
		}
		&::-webkit-scrollbar {
			width: calc(1rem - 1px);
			height: 1rem;
		}
	}
	> .MuiCollapse-container {
		overflow: overlay;
	}
}

.ncf-graph-node__search {
	display: grid;
	grid-template-columns: 1fr 1fr;
	gap: 0.75rem;
	padding: 0.25rem;
}

.ncf-graph-node__search__section {
	display: flex;
	flex-direction: column;
	&:not(:first-child()) {
		padding-top: 0.75rem;
	}
}

.ncf-graph-node__search__title {
	font-size: 1.25rem;
	border-bottom: 1px solid $light;
	margin-bottom: 0.5rem;
}

.ncf-basic__accordion__item {
	.ncf-basic__accordion-header {
		display: flex;
		color: $light;
		flex-wrap: nowrap;
		align-items: center;
		padding: 0.25rem;
		svg {
			height: 2rem;
		}
	}
	.ncf-basic__accordion-header__text {
		margin-right: auto;
	}
}
.ncf-basic__details__selection {
	width: 100%;
	align-items: stretch;
	min-height: 3rem;
}

.ncf__toolbox__footer {
	flex: 0;
	display: flex;
	justify-content: flex-end;
}

.ncf-basic_description {
	display: flex;
	align-items: center;
}

.ncf-advanced__accordion.MuiAccordion-root {
	background-color: rgba($gray-900, 0.5);
}

.ncf-advanced__checkgroup {
	width: 100%;
	color: $light;
	.grid-columns.checkgroup__columns {
		gap: 0px;
	}
}

.ncf__checkgroup__header {
	border-bottom: 1px solid $light;
	padding-top: 0.5rem;
	font-size: 1.2rem;
}

.ncf-advanced__clear__container {
	flex: 0;
	display: flex;
	justify-content: flex-end;
}

.ncf__selection__modal__content {
	width: 100%;
	height: 100%;
	display: flex;
	overflow: hidden;
	.checkgroup__autocomplete__input__row {
		padding-left: 0.5rem;
		padding-right: 1.5rem;
	}
}

.ncf-advanced__ncf__header__wrapper {
	display: flex;
	justify-content: space-between;
	align-items: center;
}

.ncf-advanced__ncf__header__button__wrapper {
	margin: -0.5rem 0rem;
}

.facility__search {
	width: max-content;
	position: absolute;
	right: 4.5rem;
	top: calc(1rem / 0.65);
	font-size: 0.8em;
	user-select: none;
	display: flex;
	flex-direction: column;
	background-color: $black;
	border: 1px solid rgba($light, 0.3);
	border-radius: 0.667rem;
	border-color: $cyan;
}
.ncf-view__toggles {
	color: $white;
	display: flex;
	flex-direction: column;
	width: 100%;
	align-items: stretch;
	label {
		cursor: pointer;
	}
}

.ncf-view__display__options {
	display: flex;
	flex-direction: column;
	color: $white;
	width: 100%;
	align-items: stretch;
}

.ncf-metrics__window, .ncf-turned-off-facilities__window {
	.window__content {
		background: rgba($blue, 0.5);
	}
}

.ncf-legend__window {
	backdrop-filter: blur(0px);
	opacity: 0.8;
	transition: all $transition-duration $transition-timing;
	&:hover {
		opacity: 1;
	}
	.window__content {
		background-color: rgba($black, 0.7);
		border-radius: 0.25rem;
		pointer-events: all;
		flex-grow: 0;
	}
}

.ncf-legend__position {
	position: absolute;
	top: 0.5rem;
	right: 4.375rem;
	width: 12rem;
	opacity: 0.7;
	background-color: rgba($black, 0.7);
	border-radius: 0.25rem;
	transition: all $transition-duration $transition-timing;
	&:hover {
		opacity: 1;
	}
}

.ncf-legend__button__position {
	position: absolute;
	top: 0.5rem;
	right: 0.5rem;
}

.ncf-legend__aspect__ratio {
	height: 0px;
	width: 100%;
	padding-top: 100%;
	// border: 1px solid rgba($cyan, 0.2);
	// border-radius: 1rem;
	// background-color: rgba($gray-900, 0.5);
	// backdrop-filter: blur(3px);
	position: relative;
	.pyramid__container {
		position: absolute;
		top: 0px;
	}
}

.ncf-legend__container {
	padding: 0.5rem;
}

.ncd-legend__layout {
	display: flex;
	flex-direction: column-reverse;
}

.ncf-legend__large .ncf-legend__container {
	padding: 0.75rem;

	font-size: 1.5rem;
}

.ncf-legend__medium .ncf-legend__container {
	padding: 0.6rem;

	font-size: 1.2rem;
}

.ncf-legend__small .ncf-legend__container {
	padding: 0.5rem;

	font-size: 0.75rem;
}
.ncf-legend__xsmall .ncf-legend__container {
	padding: 0.5rem;
}

.ncf-legend__label__container {
	height: 100%;
	position: relative;
	display: flex;
	flex-direction: row;
	flex-wrap: nowrap;
	align-items: center;
}

.ncf-legend__unknown__color {
	--hovercolor: #{$gray-400};
	.pyramid__legend__hover__text {
		span {
			color: $black;
		}
	}
}

.pyramid__section {
	// &:first-child {
	// 	.ncf-metric__label__container {
	// 		align-items: flex-end;
	// 	}
	// }
	&:hover {
		.pyramid__legend__hover {
			opacity: 1;
		}
	}
	.svg {
		transition: all $transition-duration $transition-timing;
		opacity: 0.6;
	}
	.pyramid__section__stroke {
		stroke: none;
	}
	svg {
		filter: brightness(1);
	}
	&:hover svg,
	svg.ncf-legend__active__section {
		filter: brightness(1.5);
		opacity: 1;
	}
}

.pyramid__legend__hover__container {
	width: 0px;
	height: 100%;
	display: flex;
	align-items: center;
	justify-content: flex-end;
}

.pyramid__legend__hover {
	opacity: 0;
	width: fit-content;
	transition: all $transition-duration $transition-timing;
	filter: brightness(1.5);
	overflow: visible;
	display: flex;
	flex-direction: row-reverse;
	flex-wrap: nowrap;
	align-items: center;

	&::before {
		border-radius: 0.25rem;
		content: '';
		height: 2px;
		width: 1.5rem;
		background: var(--hovercolor);
		opacity: 0.8;
	}
}

.pyramid__legend__hover__text {
	padding: 0.25rem 0.5rem;
	position: relative;
	&::after {
		border-radius: 0.25rem;
		position: absolute;
		content: '';
		top: 0px;
		left: 0px;
		bottom: 0px;
		right: -0px;
		background: linear-gradient(to left, var(--hovercolor), $black 90%);
		z-index: -1;
		opacity: 0.8;
	}
	span {
		color: $white;
		white-space: nowrap;
		padding-left: 1.25rem;
		z-index: 0;
	}
}

//Guided approach
.ncf-guided__wrapper {
	padding: 0.25rem;
	background: rgba($black, 0.9);
	opacity: 0.6;
	transition: all $transition-duration $transition-timing;
	border-radius: 0.25rem;
	pointer-events: all;
	flex-grow: 0;
	&:hover {
		opacity: 1;
	}
}

.ncf-guided__trigger.button__styled.MuiButton-contained {
	// flex: 0;
	padding: 0.375rem;
	min-width: fit-content;
	&:hover {
		opacity: 1;
	}
}

.ncf-guided__header__slider {
	margin-left: 0.75rem;
}

.ncf-guided__header {
	display: flex;
	flex-direction: row;
	flex-wrap: nowrap;
	justify-content: space-between;
	align-items: center;
	background-color: rgba($blue, 0.9);
	border-radius: 0.5rem;
	width: 100%;
}

.ncf-guided__header__title.MuiButtonBase-root {
	font-size: 1.2rem;
	padding: 0.5rem;
	border-radius: 0.5rem;
	white-space: nowrap;
}

.ncf-guided__workflows {
	display: flex;
	flex-direction: row;
	flex-wrap: nowrap;
	background-color: rgba($dark, 0.9);
	margin-right: 1rem;
	margin-left: 1rem;
	border-bottom-left-radius: 0.5rem;
	border-bottom-right-radius: 0.5rem;
}

.ncf-guided__workflow__item.MuiButtonBase-root {
	padding: 0.5rem;
	white-space: nowrap;
}

.ncf-guided__workflow__desc__container {
	overflow: visible;
}

.ncf-guided__workflow__desc {
	width: max-content;
	max-width: 18rem;
	display: flex;
	align-items: center;
	background-color: rgba($white, 0.9);
	color: $dark;
	padding: 0.5rem;
	margin-top: 0.5rem;
	margin-left: 0.5rem;
	border-radius: 0.5rem;
}

.ncf-desc-icon {
	color: $white;
	background-color: rgba($dark, 0.9);
	border-radius: 999px;
	margin-right: 0.5rem;
	padding: 0.25rem;
	svg {
		height: 2.5rem;
	}
}

.ncf-metrics__box, .ncf-turned-off-facilities__box {
	background-color: rgba($gray-900, 0.9);
	backdrop-filter: blur(3px);
	display: flex;
	flex-direction: column;
	min-height: 100%;
}

.ncf-metrics__popper, .ncf-turned-off-facilities__popper {
	max-height: 30vh;
	overflow: hidden;
	background-color: rgba($gray-900, 0.9);
	display: flex;
	flex-direction: column;
	border-radius: 0.5rem;
	padding: 0.5rem;
}

.ncf-metrics__popper__title, .ncf-turned-off-facilities__popper__title {
	flex: 0;
}

.ncf-metrics__popper__body, .ncf-turned-off-facilities__popper__body {
	flex: 1;
	overflow: auto;
	padding: 0.25rem 0rem;
}

.ncf-metrics__button__position, .ncf-turned-off-facilities__button_position {
	position: absolute;
	bottom: 1rem;
	left: 6rem;
}

.ncf-legend__header,
.ncf-metrics__header,
.ncf-turned-off-facilities__header {
	display: flex;
	flex-wrap: nowrap;
	padding-left: 0.5rem;
	align-items: center;
	flex: 0;
}

.ncf-legend__header {
	margin-bottom: -1.75rem;
}

.ncf-legend__header__collapse,
.ncf-metrics__header__collapse,
.ncf-turned-off-facilities__header__collapse {
	flex-grow: 1;
	display: flex;
	flex-wrap: nowrap;
	justify-content: space-between;
	align-items: center;
	padding-left: 0.5rem;
}

.ncf-legend__title,
.ncf-metrics__title,
.ncf-turned-off-facilities__title {
	text-transform: uppercase;
}

.ncf-legend__close .ncf-metrics__close, .ncf-legend__close .ncf-turned-off-facilities__close {
	justify-self: flex-end;
	padding: 0.375rem;
}

.ncf-metrics-container {
	--cols: 3;
	display: grid;
	grid-template-columns: 1fr minmax(5rem, auto) 1fr minmax(5rem, auto);
	padding: 0.25rem;
	gap: 0.25rem;
	justify-items: stretch;
	align-items: stretch;
	flex: 1;
	&[data-cols='1'] {
		grid-template-columns: 1fr minmax(5rem, auto);
	}

	&[data-cols='3'] {
		grid-template-columns: 1fr minmax(5rem, auto) 1fr minmax(5rem, auto) 1fr minmax(5rem, auto);
	}
}

.ncf-metrics__label,
.ncf-metrics__count {
	padding: 0.25rem 0.5rem;
	font-size: 1rem;
	display: flex;
	align-items: center;
	flex-wrap: nowrap;
}

.ncf-metrics__label__container {
	display: flex;
}

.ncf-metrics__label.MuiButtonBase-root {
	white-space: nowrap;
	padding-right: 1rem;
	flex-grow: 1;
	justify-content: flex-start;
	padding-left: 0.5rem;
	padding-right: 0.5rem;
	text-align: left;
}

.ncf-metrics__arrow {
	transition: all $transition-duration $transition-timing;
	margin-left: 0.25rem;
	margin-left: auto;
}

.ncf-metrics__color {
	width: 1rem;
	height: 1rem;
	border-radius: 999px;
	margin-right: 0.75rem;
	line-height: 1;
	text-align: center;
}

.ncf-metrics__color__filled {
	background-color: currentColor;
}

.ncf-metrics__color__hollow {
	border: 2px solid currentColor;
}

.ncf-metrics__color__unknown {
	background-color: $gray-400;
	color: $black;
}

.ncf-metrics__count {
	background-color: $gray-700;
	justify-content: flex-end;
	padding-left: 1rem;
	min-width: 5rem;
	min-height: 2rem;
	flex-grow: 0;
	line-height: 1;
}

.ncf-turned-off-facilities-container {
	min-width: 300px;
}

.ncf-graph-data-navigation__position {
	position: absolute;
	top: 0px;
	left: 0px;
	bottom: 0px;
	padding: 0.5rem;
}

.ncf-graph-controls__position {
	position: absolute;
	top: 0px;
	right: 0px;
	bottom: 0px;
	padding: 0.5rem;
}

.ncf-graph-controls {
	display: flex;
	flex-direction: column;
	justify-content: space-between;
	pointer-events: none;
}

.ncf-graph-controls__section {
	padding: 0.25rem;
	background: rgba($black, 0.9);
	// backdrop-filter: blur(3px);
	opacity: 0.6;
	transition: all $transition-duration $transition-timing;
	border-radius: 0.25rem;
	pointer-events: all;
	flex-grow: 0;
	&:hover {
		opacity: 1;
	}
	.ncf-graph-controls__section {
		opacity: 1;
	}
}

.ncf-graph-controls__section__center {
	flex-grow: 0.75;
}

.ncf-graph-controls__button.button__styled.MuiButton-root {
	padding: 0.5rem;
	opacity: 0.7;
	transition: all $transition-duration $transition-timing;
	margin: 0.125rem 0rem;
	&:hover {
		opacity: 1;
	}
	border-color: rgba($white, 0.3);
	&[aria-selected='true'] {
		border-color: rgba($white, 0.9);
	}
	// provided layout icons have their own padding differing from material
	&.ncf-graph-controls__button__layout {
		.ncf-graph-controls__button__icon {
			margin: -0.25rem -0.25rem;
			width: 1.75rem;
			height: 1.75rem;
		}
	}
}

.ncf-graph-controls__button__icon {
	width: 1.25rem;
	height: 1.25rem;
	display: flex;
	svg {
		width: 100%;
	}

	&.rotate__down {
		transform: rotate(0deg);
	}
	&.rotate__right {
		transform: rotate(-90deg);
	}
}

.ncf__selection__modal__content_light_background {
	font-size: 0.96rem;
	//font-weight: bold ;
	//font-family: Verdana, sans-serif;
	.MuiInputBase-root {
		&::after,
		&::before {
			display: none;
		}
	}

	.MuiButtonBase-root.button__styled.MuiButton-outlined {
		padding-top: 0.667rem;
		padding-bottom: 0.667rem;
	}
}

.ncf-graph-viewoptions {
	display: grid;
	grid-template-columns: 1fr 1fr 1fr;
	grid-auto-rows: 1fr;
	color: $white;
	gap: 0.25rem;
	padding: 0.5rem;
	align-items: center;
}

.slider-wrapper {
	margin: 0rem 0.5rem;
	display: flex;
	align-items: center;
	justify-content: center;
}

.grid-to-end {
	grid-column: 2/-1;
}

.ncf__selection__overlay {
	position: absolute;
	top: 0px;
	left: 0px;
	bottom: 0px;
	right: 0px;
	display: flex;
	flex-direction: column;
	justify-content: center;
	align-items: center;
}

.ncf__selection__overlay__body {
	padding: 1rem;
	background: rgba($black, 0.9);
	border-radius: 0.5rem;
}

.ncf__selection__overlay__option__container {
	display: flex;
	flex-direction: column;
	align-items: flex-start;
	padding: 1rem;
	& > *:not(:first-child()) {
		margin-top: 0.5rem;
	}
}

.ncf__selection__overlay__title {
	border-bottom: 1px solid currentColor;
	text-align: center;
	font-size: x-large;
}

.ncf__selection__overlay__option {
	display: flex;
	flex-wrap: nowrap;
	align-items: center;
	font-size: larger;
	& > *:not(:first-child()) {
		padding-left: 1rem;
	}
}

.ncf-search__section__content {
	width: 100%;
	overflow: auto;
}
